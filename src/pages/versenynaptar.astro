---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// 1. LÉPÉS: Lekérjük a cikkeket, és KISZŰRJÜK az adott kategóriát
// (Fontos: Pontosan úgy kell írni a kategória nevét, ahogy a config.yml-ben szerepel!)
const allPosts = await getCollection('hirek');
const pagePosts = allPosts.filter(post => post.data.category === 'Versenynaptár');
---

<BaseLayout title="Versenynaptár">
  
  <div style="max-width: 900px; margin: 0 auto; padding: 20px;">
    <h1 style="font-size: 2.5rem; margin-bottom: 30px; color: #1a365d; border-bottom: 2px solid #ecc94b; padding-bottom: 10px;">
      Versenynaptár
    </h1>
    
    <ul style="list-style: none; padding: 0;">
      {pagePosts.map((post) => (
        <li style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
          
          <div style="width: 100px; height: 100px; flex-shrink: 0; background-color: #f4f4f5; border-radius: 8px; overflow: hidden;">
            {post.data.thumbnail && (
              <img src={post.data.thumbnail} alt={post.data.title} style="width: 100%; height: 100%; object-fit: cover;" />
            )}
          </div>
          
          <a href={`/cikk/${post.slug}`} style="font-size: 1.25rem; font-weight: bold; color: #2563eb; text-decoration: none;">
            {post.data.title}
          </a>
          
        </li>
      ))}
    </ul>

    {pagePosts.length === 0 && (
      <p style="color: #666; font-style: italic;">Hamarosan új információkkal jelentkezünk ebben a témában!</p>
    )}
  </div>

</BaseLayout>