---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// 1. Lekérjük az összes cikket
const allPosts = await getCollection('hirek');

// 2. Kikeressük azt az egyetlent, aminek a kategóriája "Kezdőlap"
const singlePost = allPosts.find(post => post.data.category === 'Kezdőlap');

// 3. Ha megvan, előkészítjük a HTML tartalmát megjelenítésre
const Content = singlePost ? (await singlePost.render()).Content : null;
---

<BaseLayout title="Kezdőlap">
  
  <div style="max-width: 900px; margin: 0 auto; padding: 20px;">
    
    {Content ? (
      // Ha megírtad a CMS-ben, itt jelenik meg a teljes, formázott szöveg és a képek
      <div style="font-size: 1.1rem; line-height: 1.6; color: #333;">
        <Content />
      </div>
    ) : (
      // Ha még üres a kategória, ezt az üzenetet mutatja
      <p style="text-align: center; color: #666; font-style: italic; margin-top: 50px; font-size: 1.2rem;">
        A Kezdőlap tartalma feltöltés alatt áll. Kérjük, látogass vissza később!
      </p>
    )}

  </div>

</BaseLayout>